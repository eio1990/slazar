"""Скрипт для заповнення номенклатури даними"""
import sys
from database import get_db_connection

# Номенклатура із завдання
NOMENCLATURE_DATA = [
    # Сировина - М'ясо
    ("Яловичина туша", "Сировина - М'ясо", "кг", 2),
    ("Яловичина вищій ґатунок", "Сировина - М'ясо", "кг", 2),
    ("Яловичина перший ґатунок", "Сировина - М'ясо", "кг", 2),
    ("Яловичина другий ґатунок", "Сировина - М'ясо", "кг", 2),
    ("Свинина биток", "Сировина - М'ясо", "кг", 2),
    ("Курка філе", "Сировина - М'ясо", "кг", 2),
    ("Курка стегно", "Сировина - М'ясо", "кг", 2),
    ("Індик філе", "Сировина - М'ясо", "кг", 2),
    ("Конина вищій ґатунок", "Сировина - М'ясо", "кг", 2),
    ("Конина перший ґатунок", "Сировина - М'ясо", "кг", 2),
    ("Кінський жир", "Сировина - М'ясо", "кг", 2),
    ("Конина туша", "Сировина - М'ясо", "кг", 2),
    
    # Спеції та маринади
    ("Біопак-Р", "Спеції", "од", 0),
    ("Суміш прянощів \"Гусарська ковбаса\"", "Спеції", "кг", 2),
    ("Суміш прянощів \"Угорська\"", "Спеції", "кг", 2),
    ("Суміш прянощів \"Прованс\"", "Спеції", "кг", 2),
    ("Дозрівач", "Спеції", "кг", 2),
    ("Цукор", "Спеції", "кг", 2),
    ("Пажитник", "Спеції", "кг", 2),
    ("Паприка", "Спеції", "кг", 2),
    ("Чорний перець горошок", "Спеції", "кг", 2),
    ("Перець чілі", "Спеції", "кг", 2),
    ("Карі", "Спеції", "кг", 2),
    ("Зіра", "Спеції", "кг", 2),
    ("Часник", "Спеції", "кг", 2),
    ("Перець білий", "Спеції", "кг", 2),
    ("Фарба харчова", "Спеції", "кг", 2),
    ("Сіль", "Спеції", "кг", 2),
    ("Сіль нітритна", "Спеції", "кг", 2),
    ("Перець душистий", "Спеції", "кг", 2),
    ("Борошно", "Спеції", "кг", 2),
    ("Кардамон", "Спеції", "кг", 2),
    ("Куркума 2%", "Спеції", "кг", 2),
    ("Куркума 3.5%", "Спеції", "кг", 2),
    ("Цитрат", "Спеції", "кг", 2),
    ("Суміш спецій універсальна для копченого м'яса", "Спеції", "кг", 2),
    ("Олія соняшникова", "Спеції", "л", 2),
    ("Оцет столовий", "Спеції", "л", 2),
    ("Чаман", "Спеції", "кг", 2),
    ("Теріякі", "Спеції", "кг", 2),
    ("Маринад кінь", "Спеції", "кг", 2),
    
    # Упаковка
    ("Кішка", "Упаковка", "од", 0),
    ("Оболонка інша", "Упаковка", "м", 2),
    ("Пакет вакуумний чорний 200*100", "Упаковка", "од", 0),
    ("Пакет вакуумний прозорий 200*100", "Упаковка", "од", 0),
    ("Пакет вакуумний 200*150", "Упаковка", "од", 0),
    ("Пакет вакуумний 250*180", "Упаковка", "од", 0),
    ("Пакет вакуумний 400*300", "Упаковка", "од", 0),
    ("Пакет вакуумний 125*450", "Упаковка", "од", 0),
    ("Пакет вакуумний 180*500", "Упаковка", "од", 0),
    ("Пакет вакуумний 110*400", "Упаковка", "од", 0),
    ("ПЕТ плівка для формування лотків", "Упаковка", "м", 2),
    ("Плівка для запаювання лотків", "Упаковка", "м", 2),
    ("Плівка для субкоробки", "Упаковка", "м", 2),
    ("ПЕТ/ПЕ плівка для формування лотків СКІН", "Упаковка", "м", 2),
    ("Плівка для запаювання лотків СКІН", "Упаковка", "м", 2),
    ("Коробка 150*300*400", "Упаковка", "од", 0),
    ("Коробка 300*300*400", "Упаковка", "од", 0),
    ("Пакети", "Упаковка", "од", 0),
    
    # Етикетки - скін
    ("Бастурма передня 80*60", "Етикетки - скін", "од", 0),
    ("Бастурма 60 г задня 80*60", "Етикетки - скін", "од", 0),
    ("Банкетна передня 80*60", "Етикетки - скін", "од", 0),
    ("Банкетна 60 г задня 80*60", "Етикетки - скін", "од", 0),
    ("Конина передня 80*60", "Етикетки - скін", "од", 0),
    ("Конина 50 г задня 80*60", "Етикетки - скін", "од", 0),
    ("Махан передня 80*60", "Етикетки - скін", "од", 0),
    ("Махан 50 г задня 80*60", "Етикетки - скін", "од", 0),
    ("Суджук передня 80*60", "Етикетки - скін", "од", 0),
    ("Суджук 50 г задня 80*60", "Етикетки - скін", "од", 0),
    ("Філе Індика передня 80*60", "Етикетки - скін", "од", 0),
    ("Філе Індика 60 г задня 80*60", "Етикетки - скін", "од", 0),
    ("Термоетикетка 80*60", "Етикетки - скін", "од", 0),
    
    # Етикетки - вакуум
    ("Бастурма 50 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Суджук 50 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Філе Куряче 40 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Банкетна 50 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Конина 50 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Махан 50 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Філе Індика 50 г 75*75", "Етикетки - вакуум", "од", 0),
    ("Пластини 50 г 75*75", "Етикетки - вакуум", "од", 0),
    
    # Етикетки - вагова
    ("Бастурма 100*50", "Етикетки - вагова", "од", 0),
    ("Банкетна 100*50", "Етикетки - вагова", "од", 0),
    ("Суджук 100*50", "Етикетки - вагова", "од", 0),
    ("Філе Куряче 100*50", "Етикетки - вагова", "од", 0),
    
    # Інші матеріали
    ("Термоетикетка", "Інші матеріали", "од", 0),
    ("Плівка для термодатера", "Інші матеріали", "м", 2),
    ("Чорнила для маркиратора", "Інші матеріали", "од", 0),
    ("Ніж для слайсера 330 мм", "Інші матеріали", "од", 0),
    ("Миючий засіб", "Інші матеріали", "од", 0),
    ("Миючий порошок", "Інші матеріали", "од", 0),
    ("Губка", "Інші матеріали", "од", 0),
    ("Металевий скрибок", "Інші матеріали", "од", 0),
    
    # Готова продукція
    ("Бастурма класична", "Готова продукція", "кг", 2),
    ("Бастурма 80г вакуум", "Готова продукція", "од", 0),
    ("Бастурма 50г вакуум", "Готова продукція", "од", 0),
    ("Суджук ваговий", "Готова продукція", "кг", 2),
    ("Суджук 80г вакуум", "Готова продукція", "од", 0),
    ("Суджук 50г вакуум", "Готова продукція", "од", 0),
    ("Пластина з бастурми 50г вакуум", "Готова продукція", "од", 0),
    ("Асорті бастурма та суджук вакуум", "Готова продукція", "од", 0),
    ("Свинина сиров'ялена вагова", "Готова продукція", "кг", 2),
    ("Свинина сиров'ялена 80г вакуум", "Готова продукція", "од", 0),
    ("Свинина сиров'ялена 50г вакуум", "Готова продукція", "од", 0),
    ("Курка сиров'ялена вагова", "Готова продукція", "кг", 2),
    ("Курка сиров'ялена 40г вакуум", "Готова продукція", "од", 0),
    ("Індичка сиров'ялена вагова", "Готова продукція", "кг", 2),
    ("Індичка сиров'ялена 80г вакуум", "Готова продукція", "од", 0),
    ("Бастурма з конини вагова", "Готова продукція", "кг", 2),
    ("Бастурма з конини 80г вакуум", "Готова продукція", "од", 0),
    ("Пластина з конини 50г вакуум", "Готова продукція", "од", 0),
    ("Махан ваговий", "Готова продукція", "кг", 2),
    ("Махан 80г вакуум", "Готова продукція", "од", 0),
    ("Курхан ваговий", "Готова продукція", "кг", 2),
    ("Курхан 80г вакуум", "Готова продукція", "од", 0),
    ("Індичка сиров'ялена 50г вакуум", "Готова продукція", "од", 0),
    ("Махан 50г вакуум", "Готова продукція", "од", 0),
    ("Яловичина пластина вакуум 50г", "Готова продукція", "од", 0),
    ("Яловичина пластина запаяна 50г", "Готова продукція", "од", 0),
    ("Бастурма бенкетна 80 г вакуум", "Готова продукція", "од", 0),
    ("Бастурма бенкетна 50 г вакуум", "Готова продукція", "од", 0),
    ("Бастурма бенкетна скін 60г", "Готова продукція", "од", 0),
    ("Суджук скін 50г", "Готова продукція", "од", 0),
    ("Махан скін 50г", "Готова продукція", "од", 0),
    ("Яловичина пластина скін 50г", "Готова продукція", "од", 0),
    ("Бастурма з конини скін 50г", "Готова продукція", "од", 0),
    ("Бастурма з яловичини скін 60г", "Готова продукція", "од", 0),
    ("Індичка сиров'ялена скін 50г", "Готова продукція", "од", 0),
    ("Індичка сиров'ялена скін 60 г", "Готова продукція", "од", 0),
    ("Пластина яловичина вагова", "Готова продукція", "кг", 2),
    ("Бастурма з яловичини скін 50г", "Готова продукція", "од", 0),
    ("Індичка сиров'ялена скін 50 г", "Готова продукція", "од", 0),
    ("Пластина конина вагова", "Готова продукція", "кг", 2),
]

def seed_nomenclature():
    """Заповнити базу даних номенклатурою"""
    with get_db_connection() as conn:
        cursor = conn.cursor()
        
        added = 0
        skipped = 0
        
        for name, category, unit, precision in NOMENCLATURE_DATA:
            try:
                cursor.execute(
                    """INSERT INTO nomenclature (name, category, unit, precision_digits) 
                       VALUES (?, ?, ?, ?)""",
                    (name, category, unit, precision)
                )
                added += 1
                print(f"✓ Додано: {name}")
            except Exception as e:
                if "UNIQUE" in str(e) or "duplicate" in str(e).lower():
                    skipped += 1
                    print(f"⊗ Пропущено (вже існує): {name}")
                else:
                    print(f"✗ Помилка для {name}: {e}")
        
        conn.commit()
        print(f"\n{'='*60}")
        print(f"Додано нових записів: {added}")
        print(f"Пропущено (вже існують): {skipped}")
        print(f"Всього оброблено: {added + skipped}")
        print(f"{'='*60}")

if __name__ == "__main__":
    try:
        seed_nomenclature()
    except Exception as e:
        print(f"Помилка: {e}")
        sys.exit(1)
