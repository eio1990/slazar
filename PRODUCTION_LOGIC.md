# –î–ï–¢–ê–õ–¨–ù–ê –õ–û–ì–Ü–ö–ê –í–ò–†–û–ë–ù–ò–¶–¢–í–ê - –ü–û–ö–†–û–ö–û–í–Ü –†–ï–¶–ï–ü–¢–ò

## –õ–ï–ì–ï–ù–î–ê:
- üë§ **–û–ü–ï–†–ê–¢–û–†** - –¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –¥–æ–¥–∞—Ç–∫—É
- üíª **–ö–û–î (–∞–≤—Ç–æ)** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –¥—ñ—ó —Å–∏—Å—Ç–µ–º–∏
- üì§ **–°–ü–ò–°–ê–ù–ù–Ø** - withdrawal –∑—ñ —Å–∫–ª–∞–¥—É
- üì• **–û–ü–†–ò–ë–£–¢–ö–£–í–ê–ù–ù–Ø** - receipt –Ω–∞ —Å–∫–ª–∞–¥
- üìù **–°–¢–í–û–†–ï–ù–ù–Ø** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É –≤ –ë–î

---

## –†–ï–¶–ï–ü–¢ 1: –ë–∞—Å—Ç—É—Ä–º–∞ –∫–ª–∞—Å–∏—á–Ω–∞ (ID=2)

### –°–∏—Ä–æ–≤–∏–Ω–∞:
- –Ø–ª–æ–≤–∏—á–∏–Ω–∞ –≤–∏—â—ñ–π “ë–∞—Ç—É–Ω–æ–∫: 100 –∫–≥

### –°–ø–µ—Ü–∏—ñ (—á–∞–º–∞–Ω):
- –ü–∞–∂–∏—Ç–Ω–∏–∫: 9.23 –∫–≥ (+ 36.92 –∫–≥ –≤–æ–¥–∏ = 1:4)
- –ß–∞—Å–Ω–∏–∫: 6.15 –∫–≥
- –ü–∞–ø—Ä–∏–∫–∞: 4.62 –∫–≥
- –ë–æ—Ä–æ—à–Ω–æ: 3.08 –∫–≥
- –ü–µ—Ä–µ—Ü—å —á—ñ–ª—ñ: 1.54 –∫–≥
- **–í–°–¨–û–ì–û: 24.62 –∫–≥ —Å–ø–µ—Ü–∏–π ‚Üí ~61 –∫–≥ –≥–æ—Ç–æ–≤–æ–≥–æ —á–∞–º–∞–Ω—É**

---

### –ö–†–û–ö 0: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä—Ç—ñ—ó –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –í–∏–±–∏—Ä–∞—î —Ä–µ—Ü–µ–ø—Ç "–ë–∞—Å—Ç—É—Ä–º–∞ –∫–ª–∞—Å–∏—á–Ω–∞"
2. –í–≤–æ–¥–∏—Ç—å –ø–æ—á–∞—Ç–∫–æ–≤—É –≤–∞–≥—É: 100 –∫–≥
3. –ù–∞—Ç–∏—Å–∫–∞—î "–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ä—Ç—ñ—é"

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batches`:
   - batch_number: "BAST-12062025-001"
   - recipe_id: 2
   - initial_weight: 100 –∫–≥
   - status: "created"
   - current_step: 0

2. üì§ **–°–ü–ò–°–£–Ñ —Å–∏—Ä–æ–≤–∏–Ω—É** (–Ø–ª–æ–≤–∏—á–∏–Ω–∞ –≤–∏—â—ñ–π “ë–∞—Ç—É–Ω–æ–∫):
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - operation_type: "withdrawal"
     - quantity: 100 –∫–≥
     - source_operation_type: "production_start"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: quantity -= 100 –∫–≥

3. ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î: batch_id, batch_number

---

### –ö–†–û–ö 1: –û–±—Ä—ñ–∑–∫–∞ —Ç–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ (step_order=1, type=trim)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –í—ñ–¥–∫—Ä–∏–≤–∞—î –ø–∞—Ä—Ç—ñ—é BAST-12062025-001
2. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–û–±—Ä—ñ–∑–∫–∞"
3. –í–≤–æ–¥–∏—Ç—å –≤–∞–≥—É –æ–±—Ä—ñ–∑–æ–∫: 5 –∫–≥
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 1
   - operation_type: "trim"
   - weight_before: 100 –∫–≥
   - weight_after: 95 –∫–≥
   - parameters: {"trim_waste": 5}

2. üì§ **–°–ü–ò–°–£–Ñ –≤—ñ–¥—Ö–æ–¥–∏** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, —è–∫—â–æ trim_returned=false):
   - –Ø–∫—â–æ –æ–±—Ä—ñ–∑–∫–∏ –ù–ï –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è ‚Üí —Å—Ç–≤–æ—Ä—é—î movement –¥–ª—è –≤—ñ–¥—Ö–æ–¥—ñ–≤

3. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 1
   - status: "in_progress"

---

### –ö–†–û–ö 2: –ó–∞—Å–æ–ª–∫–∞ (step_order=2, type=salt)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ó–∞—Å–æ–ª–∏—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–ó–∞—Å–æ–ª–∫–∞"
2. –ë–∞—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ:
   - –°—ñ–ª—å: 20.67 –∫–≥ (–Ω–∞ 100 –∫–≥ ‚Üí —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫: 100/100 * 20.67 = 20.67 –∫–≥)
   - –í–æ–¥–∞: 66.67 –ª
3. –í–≤–æ–¥–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–Ω—ñ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ (–º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏):
   - –°—ñ–ª—å: 20 –∫–≥
   - –í–æ–¥–∞: 65 –ª
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì§ **–°–ü–ò–°–£–Ñ —Å—ñ–ª—å** (ID=28):
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - operation_type: "withdrawal"
     - quantity: 20 –∫–≥
     - source_operation_type: "production_salting"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: —Å—ñ–ª—å -= 20 –∫–≥

2. üì§ **–°–ü–ò–°–£–Ñ –≤–æ–¥—É** (ID=136):
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - operation_type: "withdrawal"
     - quantity: 65 –ª
     - source_operation_type: "production_salting"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: –≤–æ–¥–∞ -= 65 –ª

3. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 2
   - operation_type: "salting"
   - parameters: {"salt_quantity": 20, "water_quantity": 65}
   - status: "completed"

4. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 2

**‚è±Ô∏è –ß–µ–∫–∞—î–º–æ 3 –¥–Ω—ñ (–∑–≥—ñ–¥–Ω–æ recipe_steps.duration_days)**

---

### –ö–†–û–ö 3: –ü—Ä–æ–º–∏–≤–∫–∞ (step_order=3, type=wash)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–ü—Ä–æ–º–∏–≤–∫–∞"
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (—á–µ—Ä–µ–∑ 3 –≥–æ–¥–∏–Ω–∏)

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 3
   - operation_type: "wash"
   - status: "completed"

2. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 3

**‚è±Ô∏è –ß–µ–∫–∞—î–º–æ 3 –≥–æ–¥–∏–Ω–∏ (0.13 –¥–Ω—ñ–≤)**

---

### –ö–†–û–ö 4: –°—É—à–∫–∞ 1 (step_order=4, type=dry)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–°—É—à–∫–∞ 1"
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (—á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å)

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 4
   - operation_type: "dry"
   - status: "completed"

2. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 4

**‚è±Ô∏è –ß–µ–∫–∞—î–º–æ 1 –¥–µ–Ω—å**

---

### –ö–†–û–ö 5: –ü—Ä–µ—Å 1 (step_order=5, type=press)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–ü—Ä–µ—Å 1"
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (—á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å)

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 5
   - operation_type: "press"
   - status: "completed"

2. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 5

**‚è±Ô∏è –ß–µ–∫–∞—î–º–æ 1 –¥–µ–Ω—å**

---

### –ö–†–û–ö 6: –°—É—à–∫–∞ 2 (step_order=6, type=dry)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–°—É—à–∫–∞ 2"
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (—á–µ—Ä–µ–∑ 3-4 –¥–Ω—ñ)

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 6
   - operation_type: "dry"
   - status: "completed"

2. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 6

**‚è±Ô∏è –ß–µ–∫–∞—î–º–æ 3-4 –¥–Ω—ñ**

---

### –ö–†–û–ö 7: –ù–∞–Ω–µ—Å–µ–Ω–Ω—è —á–∞–º–∞–Ω—É (step_order=7, type=mix)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–æ—Ä–º—É" –Ω–∞ –µ—Ç–∞–ø—ñ "–ù–∞–Ω–µ—Å–µ–Ω–Ω—è —á–∞–º–∞–Ω—É"
2. –ë–∞—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ø–µ—Ü–∏–π –∑ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–º–∏ –∫—ñ–ª—å–∫–æ—Å—Ç—è–º–∏ (–¥–ª—è initial_weight=100 –∫–≥):
   - –ü–∞–∂–∏—Ç–Ω–∏–∫: 9.23 –∫–≥
   - –ß–∞—Å–Ω–∏–∫: 6.15 –∫–≥
   - –ü–∞–ø—Ä–∏–∫–∞: 4.62 –∫–≥
   - –ë–æ—Ä–æ—à–Ω–æ: 3.08 –∫–≥
   - –ü–µ—Ä–µ—Ü—å —á—ñ–ª—ñ: 1.54 –∫–≥
3. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –∞–±–æ –∫–æ—Ä–∏–≥—É—î –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
4. –í–≤–æ–¥–∏—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ:
   - –í–∏—Ä–æ–±–ª–µ–Ω–æ —á–∞–º–∞–Ω—É: 61 –∫–≥ (–∞–≤—Ç–æ-—Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫: —Å—É–º–∞ —Å–ø–µ—Ü–∏–π + –ø–∞–∂–∏—Ç–Ω–∏–∫*4)
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –Ω–∞ –ø–∞—Ä—Ç—ñ—é: 60 –∫–≥
   - –ó–∞–ª–∏—à–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥: 1 –∫–≥
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –∑—ñ —Å–∫–ª–∞–¥—É: 0 –∫–≥
5. –ù–∞—Ç–∏—Å–∫–∞—î "–í–∏–≥–æ—Ç–æ–≤–∏—Ç–∏ –º—ñ–∫—Å"

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì§ **–°–ü–ò–°–£–Ñ –í–°–Ü –°–ü–ï–¶–ò–á** (–ø–æ —á–µ—Ä–∑—ñ):
   - –ü–∞–∂–∏—Ç–Ω–∏–∫: 9.23 –∫–≥
   - –ß–∞—Å–Ω–∏–∫: 6.15 –∫–≥
   - –ü–∞–ø—Ä–∏–∫–∞: 4.62 –∫–≥
   - –ë–æ—Ä–æ—à–Ω–æ: 3.08 –∫–≥
   - –ü–µ—Ä–µ—Ü—å —á—ñ–ª—ñ: 1.54 –∫–≥
   
   –î–ª—è –∫–æ–∂–Ω–æ—ó —Å–ø–µ—Ü–∏—ó:
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - operation_type: "withdrawal"
     - quantity: X –∫–≥
     - source_operation_type: "production_spice_use"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: —Å–ø–µ—Ü–∏—è -= X –∫–≥

2. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_mix_production`:
   - batch_id: X
   - produced_quantity: 61 –∫–≥
   - used_quantity: 60 –∫–≥
   - leftover_quantity: 1 –∫–≥
   - warehouse_mix_used: 0 –∫–≥

3. üì• **–û–ü–†–ò–ë–£–¢–ö–û–í–£–Ñ –∑–∞–ª–∏—à–æ–∫ —á–∞–º–∞–Ω—É** (—è–∫—â–æ leftover > 0):
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - nomenclature_id: 39 (–ß–∞–º–∞–Ω –≥–æ—Ç–æ–≤–∏–π)
     - operation_type: "receipt"
     - quantity: 1 –∫–≥
     - source_operation_type: "production_leftover"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: —á–∞–º–∞–Ω += 1 –∫–≥

4. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 7
   - operation_type: "mix"
   - status: "completed"

5. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 7

---

### –ö–†–û–ö 8: –°—É—à–∫–∞ —Ñ—ñ–Ω–∞–ª—å–Ω–∞ (step_order=8, type=dry)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–°—É—à–∫–∞ —Ñ—ñ–Ω–∞–ª—å–Ω–∞"
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (—á–µ—Ä–µ–∑ 3-4 –¥–Ω—ñ)

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 8
   - operation_type: "dry"
   - status: "completed"

2. –û–Ω–æ–≤–ª—é—î `batches`:
   - current_step: 8

**‚è±Ô∏è –ß–µ–∫–∞—î–º–æ 3-4 –¥–Ω—ñ**

---

### –ö–†–û–ö 9: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–∞—Ä—Ç—ñ—ó

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –ø–∞—Ä—Ç—ñ—é"
2. –í–≤–æ–¥–∏—Ç—å —Ñ—ñ–Ω–∞–ª—å–Ω—É –≤–∞–≥—É: 75 –∫–≥
3. –î–æ–¥–∞—î –ø—Ä–∏–º—ñ—Ç–∫–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì• **–û–ü–†–ò–ë–£–¢–ö–û–í–£–Ñ –≥–æ—Ç–æ–≤—É –ø—Ä–æ–¥—É–∫—Ü—ñ—é**:
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - nomenclature_id: 93 (–ë–∞—Å—Ç—É—Ä–º–∞ –∫–ª–∞—Å–∏—á–Ω–∞ –≤–∞–≥–æ–≤–∞)
     - operation_type: "receipt"
     - quantity: 75 –∫–≥
     - source_operation_type: "production_complete"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: –ë–∞—Å—Ç—É—Ä–º–∞ += 75 –∫–≥

2. –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –≤–∏—Ö—ñ–¥:
   - yield_percent = (75 / 100) * 100 = 75%
   - –ü–æ—Ä—ñ–≤–Ω—é—î –∑ –æ—á—ñ–∫—É–≤–∞–Ω–∏–º: 60-65%

3. –û–Ω–æ–≤–ª—é—î `batches`:
   - final_weight: 75 –∫–≥
   - status: "completed"
   - completed_at: GETUTCDATE()

4. ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ yield_percent

---

# –ü–Ü–î–°–£–ú–û–ö –î–õ–Ø –ë–ê–°–¢–£–†–ú–ò –ö–õ–ê–°–ò–ß–ù–û–á:

## –©–û –°–ü–ò–°–£–Ñ–¢–¨–°–Ø –ó–Ü –°–ö–õ–ê–î–£:
1. ‚úÖ –Ø–ª–æ–≤–∏—á–∏–Ω–∞ –≤–∏—â—ñ–π “ë–∞—Ç—É–Ω–æ–∫: 100 –∫–≥ (–Ω–∞ —Å—Ç–∞—Ä—Ç—ñ)
2. ‚úÖ –°—ñ–ª—å: 20 –∫–≥ (–Ω–∞ –µ—Ç–∞–ø—ñ –∑–∞—Å–æ–ª–∫–∏)
3. ‚úÖ –í–æ–¥–∞: 65 –ª (–Ω–∞ –µ—Ç–∞–ø—ñ –∑–∞—Å–æ–ª–∫–∏)
4. ‚úÖ –ü–∞–∂–∏—Ç–Ω–∏–∫: 9.23 –∫–≥ (–ø—Ä–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤—ñ —á–∞–º–∞–Ω—É)
5. ‚úÖ –ß–∞—Å–Ω–∏–∫: 6.15 –∫–≥ (–ø—Ä–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤—ñ —á–∞–º–∞–Ω—É)
6. ‚úÖ –ü–∞–ø—Ä–∏–∫–∞: 4.62 –∫–≥ (–ø—Ä–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤—ñ —á–∞–º–∞–Ω—É)
7. ‚úÖ –ë–æ—Ä–æ—à–Ω–æ: 3.08 –∫–≥ (–ø—Ä–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤—ñ —á–∞–º–∞–Ω—É)
8. ‚úÖ –ü–µ—Ä–µ—Ü—å —á—ñ–ª—ñ: 1.54 –∫–≥ (–ø—Ä–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤—ñ —á–∞–º–∞–Ω—É)

## –©–û –û–ü–†–ò–ë–£–¢–ö–û–í–£–Ñ–¢–¨–°–Ø –ù–ê –°–ö–õ–ê–î:
1. ‚úÖ –ß–∞–º–∞–Ω –≥–æ—Ç–æ–≤–∏–π (–∑–∞–ª–∏—à–æ–∫): 1 –∫–≥ (–ø—Ä–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤—ñ —á–∞–º–∞–Ω—É)
2. ‚úÖ –ë–∞—Å—Ç—É—Ä–º–∞ –∫–ª–∞—Å–∏—á–Ω–∞ –≤–∞–≥–æ–≤–∞: 75 –∫–≥ (–ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ)

---
---

## –†–ï–¶–ï–ü–¢ 2: –ë–∞—Å—Ç—É—Ä–º–∞ –∑ –∫–æ–Ω–∏–Ω–∏ –≤–∞–≥–æ–≤–∞ (ID=3)

### –°–∏—Ä–æ–≤–∏–Ω–∞:
- –ö–æ–Ω–∏–Ω–∞ –≤–∏—â—ñ–π “ë–∞—Ç—É–Ω–æ–∫: 100 –∫–≥

### –°–ø–µ—Ü–∏—ñ (–º–∞—Ä–∏–Ω–∞–¥):
- –ü–∞–∂–∏—Ç–Ω–∏–∫: 1 –∫–≥ (+ 4 –∫–≥ –≤–æ–¥–∏ = 1:4)
- –ü–∞–ø—Ä–∏–∫–∞: 0.5 –∫–≥
- –ß–∞—Å–Ω–∏–∫: 0.3 –∫–≥
- –ü–µ—Ä–µ—Ü—å —á—ñ–ª—ñ: 0.2 –∫–≥
- **–í–°–¨–û–ì–û: 2 –∫–≥ —Å–ø–µ—Ü–∏–π ‚Üí ~6 –∫–≥ –≥–æ—Ç–æ–≤–æ–≥–æ –º–∞—Ä–∏–Ω–∞–¥—É**

---

### –û–°–ù–û–í–ù–Ü –í–Ü–î–ú–Ü–ù–ù–û–°–¢–Ü –í–Ü–î –ö–õ–ê–°–ò–ß–ù–û–á:

**–ö–†–û–ö 5: –ú–∞—Å–∞–∂–µ—Ä –∑ —Ü—É–∫—Ä–æ–º (step_order=5, type=sugar)**

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–ü–æ—á–∞—Ç–∏" –Ω–∞ –µ—Ç–∞–ø—ñ "–ú–∞—Å–∞–∂–µ—Ä –∑ —Ü—É–∫—Ä–æ–º"
2. –í–≤–æ–¥–∏—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ü—É–∫—Ä—É: 20 –≥ –Ω–∞ –∫–≥ (–¥–ª—è 95 –∫–≥ = 1.9 –∫–≥)
3. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì§ **–°–ü–ò–°–£–Ñ —Ü—É–∫–æ—Ä**:
   - –°—Ç–≤–æ—Ä—é—î `stock_movements`:
     - quantity: 1.9 –∫–≥
     - source_operation_type: "production_sugar"
   - –û–Ω–æ–≤–ª—é—î `stock_balances`: —Ü—É–∫–æ—Ä -= 1.9 –∫–≥

2. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - step_id: 5
   - operation_type: "sugar"
   - parameters: {"sugar_quantity": 1.9}

---

**–ö–†–û–ö 9: –ù–∞–Ω–µ—Å–µ–Ω–Ω—è –º–∞—Ä–∏–Ω–∞–¥—É (step_order=9, type=mix)**

- –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ —á–∞–º–∞–Ω—É, –∞–ª–µ:
  - mix_type: "marinade_horse"
  - mix_id: 41 (–ú–∞—Ä–∏–Ω–∞–¥ –¥–ª—è –∫–æ–Ω–∏–Ω–∏)
  - –ú–µ–Ω—à–µ —Å–ø–µ—Ü–∏–π: ~2 –∫–≥ ‚Üí ~6 –∫–≥ –º–∞—Ä–∏–Ω–∞–¥—É

---
---

## –†–ï–¶–ï–ü–¢ 3-6: –Ü–Ω–¥–∏—á–∫–∞, –ö—É—Ä–∫–∞, –°–≤–∏–Ω–∏–Ω–∞, –ü–ª–∞—Å—Ç–∏–Ω–∞

### –°–ü–Ü–õ–¨–ù–ê –õ–û–ì–Ü–ö–ê (–º–∞—Ä–∏–Ω–∞–¥–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏):

**–í–Ü–î–ú–Ü–ù–ù–û–°–¢–Ü:**
1. **–û–±—Ä—ñ–∑–∫–∞ –∑ –≤—ñ–¥—Ö–æ–¥–∞–º–∏**: trim_percent = 7-25%
2. **–í–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—è –º–∞—Ä–∏–Ω–∞–¥—É** (step_type=marinade) - –ó–ê–ú–Ü–°–¢–¨ –∑–∞—Å–æ–ª–∫–∏
3. **–í–∞–∫—É—É–º–Ω–∞ —Ñ–∞—Å–æ–≤–∫–∞ —Ç–∞ –º–∞—Ä–∏–Ω—É–≤–∞–Ω–Ω—è** (step_type=vacuum) - 4-6 –¥–Ω—ñ–≤

---

### –ö–†–û–ö 2: –í–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—è –º–∞—Ä–∏–Ω–∞–¥—É (type=marinade)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –ù–∞—Ç–∏—Å–∫–∞—î "–í–∏–≥–æ—Ç–æ–≤–∏—Ç–∏ –º–∞—Ä–∏–Ω–∞–¥"
2. –ë–∞—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ø–µ—Ü–∏–π –∑ –∫—ñ–ª—å–∫–æ—Å—Ç—è–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –Ü–Ω–¥–∏—á–∫–∏):
   - –ö–æ–Ω–∏–Ω–∞ –ø–µ—Ä—à–∏–π “ë–∞—Ç—É–Ω–æ–∫: 2 –∫–≥
   - –ö–∞—Ä—ñ: 0.5 –∫–≥
   - –ü–∞–ø—Ä–∏–∫–∞: 0.4 –∫–≥
   - –ß–∞—Å–Ω–∏–∫: 0.3 –∫–≥
   - –î–æ–∑—Ä—ñ–≤–∞—á: 0.3 –∫–≥
   - –ö—ñ–Ω—Å—å–∫–∏–π –∂–∏—Ä: 0.2 –∫–≥
3. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
4. –í–≤–æ–¥–∏—Ç—å:
   - –í–∏—Ä–æ–±–ª–µ–Ω–æ –º–∞—Ä–∏–Ω–∞–¥—É: 3.7 –∫–≥
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –Ω–∞ –ø–∞—Ä—Ç—ñ—é: 3.5 –∫–≥
   - –ó–∞–ª–∏—à–æ–∫: 0.2 –∫–≥
5. –ù–∞—Ç–∏—Å–∫–∞—î "–í–∏–≥–æ—Ç–æ–≤–∏—Ç–∏ –º–∞—Ä–∏–Ω–∞–¥"

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì§ **–°–ü–ò–°–£–Ñ –í–°–Ü –°–ü–ï–¶–ò–á** (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ —á–∞–º–∞–Ω—É):
   - –î–ª—è –∫–æ–∂–Ω–æ—ó —Å–ø–µ—Ü–∏—ó —Å—Ç–≤–æ—Ä—é—î withdrawal movement

2. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_mix_production` –∞–±–æ –æ–∫—Ä–µ–º–∏–π –¥–ª—è –º–∞—Ä–∏–Ω–∞–¥—É

3. üì• **–û–ü–†–ò–ë–£–¢–ö–û–í–£–Ñ –∑–∞–ª–∏—à–æ–∫ –º–∞—Ä–∏–Ω–∞–¥—É** (—è–∫—â–æ —î):
   - receipt movement –¥–ª—è –º–∞—Ä–∏–Ω–∞–¥—É

4. üìù –°—Ç–≤–æ—Ä—é—î `batch_operations`:
   - operation_type: "marinade"

---

### –ö–†–û–ö 3: –í–∞–∫—É—É–º–Ω–∞ —Ñ–∞—Å–æ–≤–∫–∞ —Ç–∞ –º–∞—Ä–∏–Ω—É–≤–∞–Ω–Ω—è (type=vacuum)

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –§–∞—Å—É—î –º'—è—Å–æ —É –≤–∞–∫—É—É–º–Ω—ñ –ø–∞–∫–µ—Ç–∏ –∑ –º–∞—Ä–∏–Ω–∞–¥–æ–º
2. –í—ñ–¥–∑–Ω–∞—á–∞—î –≤ –¥–æ–¥–∞—Ç–∫—É "–ü–æ—á–∞—Ç–∏"
3. –ß–µ–∫–∞—î 4-6 –¥–Ω—ñ–≤

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üìù –°—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å `batch_operations`:
   - operation_type: "vacuum"
   - notes: "–í–∞–∫—É—É–º–Ω–∞ —Ñ–∞—Å–æ–≤–∫–∞ —Ç–∞ –º–∞—Ä–∏–Ω—É–≤–∞–Ω–Ω—è"

2. **–°–ü–ò–°–ê–ù–ù–Ø –ü–ê–ö–ï–¢–Ü–í –ù–ï –í–Ü–î–ë–£–í–ê–Ñ–¢–¨–°–Ø** (—Ü–µ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –µ—Ç–∞–ø)

---
---

## –†–ï–¶–ï–ü–¢ 7-8: –°—É–¥–∂—É–∫ –≤–∞–≥–æ–≤–∏–π, –ú–∞—Ö–∞–Ω –≤–∞–≥–æ–≤–∏–π

### –û–°–û–ë–õ–ò–í–û–°–¢–Ü:

**–°—É–¥–∂—É–∫ - –ë–ï–ó —Å–∏—Ä–æ–≤–∏–Ω–∏** (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≥–æ—Ç–æ–≤–∏–π —Ñ–∞—Ä—à –∞–±–æ –æ–±—Ä—ñ–∑–∫–∏)

**–ö–†–û–ö 3: –ü–æ–º–æ–ª –º'—è—Å–∞ (type=grind)**
- –ü—Ä–æ—Å—Ç–æ –≤—ñ–¥–∑–Ω–∞—á–∞—î—Ç—å—Å—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

**–ö–†–û–ö 4: –ú–∞—Å–∞–∂–µ—Ä –∑ –≤–æ–¥–æ—é (type=massage)**

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –í–≤–æ–¥–∏—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–æ–¥–∏: 15 –ª –Ω–∞ 100 –∫–≥

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì§ **–°–ü–ò–°–£–Ñ –≤–æ–¥—É**:
   - withdrawal movement

---

**–ö–†–û–ö 5: –ó–∞–ø—Ä–∞–≤–∫–∞ –≤ –∫–∏—à–∫—É (type=stuff)**

üë§ **–û–ü–ï–†–ê–¢–û–†:**
1. –í–≤–æ–¥–∏—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏:
   - –ö–∏—à–∫–∞ –≥–æ–≤—è—á–∞: 10 –º
   - –ù–∏—Ç–∫–∏: 50 —à—Ç

üíª **–ö–û–î (–∞–≤—Ç–æ):**
1. üì§ **–°–ü–ò–°–£–Ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏**:
   - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—É —Å—Ç–≤–æ—Ä—é—î withdrawal movement

---

**–ú–∞—Ö–∞–Ω - –°–ö–õ–ê–î–ù–ò–ô –º–∞—Ä–∏–Ω–∞–¥ (2 –µ—Ç–∞–ø–∏)**

**–ö–†–û–ö 2: –ü–µ—Ä—à–∏–π –º–∞—Ä–∏–Ω–∞–¥** (5 –¥–Ω—ñ–≤)
**–ö–†–û–ö 3: –î—Ä—É–≥–∏–π –º–∞—Ä–∏–Ω–∞–¥ –∑ –≥—É—Å–∞—Ä—Å—å–∫–æ—é** (–æ–¥—Ä–∞–∑—É)

---
---

# –ó–ê–ì–ê–õ–¨–ù–Ü –ü–†–ê–í–ò–õ–ê:

## 1. –°–ü–ò–°–ê–ù–ù–Ø –°–ò–†–û–í–ò–ù–ò:
- ‚úÖ –í—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è **–ü–†–ò –°–¢–í–û–†–ï–ù–ù–Ü –ü–ê–†–¢–Ü–á** (batch_create)
- ‚úÖ –î–ª—è –í–°–Ü–• —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥—ñ
- ‚úÖ –Ø–∫—â–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ - –ø–æ–º–∏–ª–∫–∞ 400

## 2. –°–ü–ò–°–ê–ù–ù–Ø –°–ü–ï–¶–ò–ô:
- ‚úÖ –í—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è **–ü–†–ò –í–ò–†–û–ë–ù–ò–¶–¢–í–Ü –ß–ê–ú–ê–ù–£/–ú–ê–†–ò–ù–ê–î–£** (produce_mix)
- ‚úÖ –í–°–Ü —Å–ø–µ—Ü–∏—ó –∑ recipe_spices —Å–ø–∏—Å—É—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å = (initial_weight / 100) * quantity_per_100kg
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –¥–ª—è –ö–û–ñ–ù–û–á —Å–ø–µ—Ü–∏—ó

## 3. –°–ü–ò–°–ê–ù–ù–Ø –°–û–õ–Ü/–í–û–î–ò:
- ‚úÖ –í—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è **–ü–†–ò –ó–ê–°–û–õ–¶–Ü** (process_salting)
- ‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫: (initial_weight / 100) * salt_per_100kg
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ

## 4. –û–ü–†–ò–ë–£–¢–ö–£–í–ê–ù–ù–Ø –ì–û–¢–û–í–û–á –ü–†–û–î–£–ö–¶–Ü–á:
- ‚úÖ –í—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è **–ü–†–ò –ó–ê–í–ï–†–®–ï–ù–ù–Ü –ü–ê–†–¢–Ü–á** (complete_batch)
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å = final_weight (–≤–≤–æ–¥–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä)
- ‚úÖ –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è receipt movement

## 5. –û–ü–†–ò–ë–£–¢–ö–£–í–ê–ù–ù–Ø –ó–ê–õ–ò–®–ö–Ü–í:
- ‚úÖ –ß–∞–º–∞–Ω/–º–∞—Ä–∏–Ω–∞–¥: —è–∫—â–æ leftover_quantity > 0
- ‚úÖ –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è receipt movement –∑ source_operation_type="production_leftover"

## 6. –Ü–î–ï–ú–ü–û–¢–ï–ù–¢–ù–Ü–°–¢–¨:
- ‚úÖ –í—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–∞—é—Ç—å idempotency_key
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –≤–∏–∫–ª–∏–∫ –∑ —Ç–∏–º —Å–∞–º–∏–º –∫–ª—é—á–µ–º ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î —ñ—Å–Ω—É—é—á–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –ø—Ä–∏ –æ—Ñ–ª–∞–π–Ω-—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

---

# –ü–ò–¢–ê–ù–ù–Ø –î–õ–Ø –ü–ï–†–ï–í–Ü–†–ö–ò:

1. ‚ùì –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —â–æ —Å–∏—Ä–æ–≤–∏–Ω–∞ —Å–ø–∏—Å—É—î—Ç—å—Å—è –ü–†–ò –°–¢–í–û–†–ï–ù–ù–Ü –ø–∞—Ä—Ç—ñ—ó, –∞ –Ω–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ?
2. ‚ùì –ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–ø–∏—Å—É–≤–∞—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ (–ø–∞–∫–µ—Ç–∏, –Ω–∏—Ç–∫–∏, –∫–∏—à–∫–∏) –Ω–∞ –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –µ—Ç–∞–ø–∞—Ö?
3. ‚ùì –î–ª—è –°—É–¥–∂—É–∫–∞ –Ω–µ–º–∞—î recipe_ingredients - —Ü–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ? –í—ñ–Ω –∑ –æ–±—Ä—ñ–∑–æ–∫?
4. ‚ùì –ß–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –æ–∫—Ä–µ–º–∏–π –æ–±–ª—ñ–∫ –æ–±—Ä—ñ–∑–æ–∫ (trim_waste) —è–∫ –æ–∫—Ä–µ–º–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞?
5. ‚ùì –ú–∞—Å–∞–∂–µ—Ä –∑ —Ü—É–∫—Ä–æ–º - —Ü–µ –æ–∫—Ä–µ–º–∏–π endpoint —á–∏ —á–∞—Å—Ç–∏–Ω–∞ –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ process_operation?
