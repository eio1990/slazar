# –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–æ–¥—É–ª—è "–î–≤–∏–∂–µ–Ω–∏—è –∑–∞–ø–∞—Å–æ–≤"

## ‚úÖ –©–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

### 1. –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏
- ‚úÖ **–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤**: –ú–æ–¥—É–ª—å –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑ –±—É–¥—å-—è–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
- ‚úÖ **Offline –ø—ñ–¥—Ç—Ä–∏–º–∫–∞**: –ö–ª—ñ—î–Ω—Ç –Ω–∞–∫–æ–ø–∏—á—É—î –æ–ø–µ—Ä–∞—Ü—ñ—ó –ª–æ–∫–∞–ª—å–Ω–æ (AsyncStorage)
- ‚úÖ **–ó–∞—Ç—Ä–∏–º–∫–∞ —Ç–∞ –ø–æ–≤—Ç–æ—Ä**: –û–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–∂—É—Ç—å –Ω–∞–¥—Ö–æ–¥–∏—Ç–∏ –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é

### 2. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

#### –ü—Ä–∏—Ö—ñ–¥
- ‚úÖ –§—ñ–∫—Å–∞—Ü—ñ—è –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∑–∞–ª–∏—à–∫—ñ–≤
- ‚úÖ –í–∫–∞–∑–∞–Ω–Ω—è –¥–∂–µ—Ä–µ–ª–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó (metadata)
- ‚úÖ –¶—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é (–¥–æ–¥–∞–Ω–æ)
- ‚úÖ API: `POST /api/stock/receipt`

#### –†–æ–∑—Ö—ñ–¥
- ‚úÖ –§—ñ–∫—Å–∞—Ü—ñ—è –∑–º–µ–Ω—à–µ–Ω–Ω—è –∑–∞–ª–∏—à–∫—ñ–≤
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–Ω–æ—Å—Ç—ñ –∑–∞–ª–∏—à–∫—É –ü–ï–†–ï–î –∑–∞–ø–∏—Å–æ–º
- ‚úÖ API: `POST /api/stock/withdrawal`
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

#### –ê—Ç—Ä–∏–±—É—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π
```python
stock_movements:
- id
- nomenclature_id
- operation_type
- quantity
- balance_after
- price_per_unit
- idempotency_key  ‚úÖ
- metadata  ‚úÖ
- operation_date  ‚úÖ
- created_at  ‚úÖ
```

### 3. –Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

#### ‚úÖ –ó–∞–±–æ—Ä–æ–Ω–∞ –≤—ñ–¥'—î–º–Ω–∏—Ö –∑–∞–ª–∏—à–∫—ñ–≤
```python
if current_balance < quantity:
    raise HTTPException(
        status_code=400,
        detail=f"–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Ç–æ–≤–∞—Ä—É –Ω–∞ —Å–∫–ª–∞–¥—ñ. –î–æ—Å—Ç—É–ø–Ω–æ: {current_balance} {unit}, –∑–∞–ø–∏—Ç–∞–Ω–æ: {quantity} {unit}"
    )
```

#### ‚úÖ –û–¥–∏–Ω–∏—Ü—ñ —Ç–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å
```python
precision = get_nomenclature_precision(conn, nomenclature_id)
quantity = round_quantity(operation.quantity, precision)
# –∫–≥/–ª/–º - 2 –∑–Ω–∞–∫–∏, –æ–¥ - 0 –∑–Ω–∞–∫—ñ–≤
```

#### ‚úÖ –Ü–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å
```python
cursor.execute(
    "SELECT id FROM stock_movements WHERE idempotency_key = ?",
    (operation.idempotency_key,)
)
if cursor.fetchone():
    return {"status": "already_processed"}
```

#### ‚úÖ –ú—ñ—Ç–∫–∞ —á–∞—Å—É
- `operation_date` - —á–∞—Å –æ–ø–µ—Ä–∞—Ü—ñ—ó (UTC)
- `created_at` - —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É

#### ‚ö†Ô∏è –ó–≤'—è–∑–Ω—ñ—Å—Ç—å (–ß–ê–°–¢–ö–û–í–û)
- –Ñ –ø–æ–ª–µ `metadata` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- –ù–µ–º–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ—ó —Å—Ö–µ–º–∏ –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π
- **–ü–û–¢–†–Ü–ë–ù–û**: –î–æ–¥–∞—Ç–∏ `source_operation_type`, `source_operation_id`

### 4. –ñ—É—Ä–Ω–∞–ª —Ç–∞ —Ç—Ä–∞—Å—É–≤–∞–ª—å–Ω—ñ—Å—Ç—å

#### ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- –¢–∞–±–ª–∏—Ü—è `stock_movements` –∑ —É—Å—ñ–º–∞ –ø–æ–ª—è–º–∏
- API: `GET /api/stock/movements`
- –§—ñ–ª—å—Ç—Ä–∏: nomenclature_id, start_date, end_date, limit
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ UI (–µ–∫—Ä–∞–Ω "–ñ—É—Ä–Ω–∞–ª")

#### ‚ùå –ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û
- –ï–∫—Å–ø–æ—Ä—Ç –∂—É—Ä–Ω–∞–ª—É –≤ Excel/CSV
- –ï–∫—Å–ø–æ—Ä—Ç –∂—É—Ä–Ω–∞–ª—É –≤ PDF
- –°–∫–ª–∞–¥–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ (–∑–∞ —Ç–∏–ø–æ–º –æ–ø–µ—Ä–∞—Ü—ñ—ó, –∑–∞ –¥–∂–µ—Ä–µ–ª–æ–º)

### 5. Offline —Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞

#### ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
```typescript
// –ö–ª—ñ—î–Ω—Ç
const operation = {
  nomenclature_id: 1,
  quantity: 100,
  idempotency_key: generateIdempotencyKey(),
  metadata: { notes: "..." }
};

if (!isOnline) {
  addToOfflineQueue({ type: 'receipt', data: operation });
}

// –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è
POST /api/sync/operations
```

---

## ‚ùå –©–û –ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û / –ü–†–û–ë–õ–ï–ú–ò

### 1. üî¥ –ö–†–ò–¢–ò–ß–ù–û: –ö–æ–Ω–∫—É—Ä—É—é—á—ñ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è (Race Conditions)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–º–∞—î –±–ª–æ–∫—É–≤–∞–Ω—å –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö!

**–°—Ü–µ–Ω–∞—Ä—ñ–π:**
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á A: —Å–ø–∏—Å—É—î 50 –∫–≥ (–∑–∞–ª–∏—à–æ–∫ 100)
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á B: —Å–ø–∏—Å—É—î 60 –∫–≥ (–∑–∞–ª–∏—à–æ–∫ 100)
---
–û–±–∏–¥–≤–∞ –±–∞—á–∞—Ç—å –∑–∞–ª–∏—à–æ–∫ 100
–û–±–∏–¥–≤–∞ –ø—Ä–æ–π–¥—É—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫—É
–§—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ª–∏—à–æ–∫: -10 –∫–≥ üî¥
```

**–†—ñ—à–µ–Ω–Ω—è 1: –û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω—ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è (Optimistic Locking)**
```python
# –î–æ–¥–∞—Ç–∏ version –¥–æ stock_balances
UPDATE stock_balances 
SET quantity = ?, version = version + 1
WHERE nomenclature_id = ? AND version = ?

# –Ø–∫—â–æ –Ω–µ –æ–Ω–æ–≤–∏–ª–æ—Å—å - –∫–æ–Ω—Ñ–ª—ñ–∫—Ç, –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏
```

**–†—ñ—à–µ–Ω–Ω—è 2: –ü–µ—Å–∏–º—ñ—Å—Ç–∏—á–Ω—ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è (SELECT FOR UPDATE)**
```python
cursor.execute(
    "SELECT quantity FROM stock_balances WITH (UPDLOCK, ROWLOCK) WHERE nomenclature_id = ?",
    (nomenclature_id,)
)
```

**–†—ñ—à–µ–Ω–Ω—è 3: –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π**
```python
conn.execute("SET TRANSACTION ISOLATION LEVEL SERIALIZABLE")
```

### 2. ‚ö†Ô∏è –ú–∞—Å–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (Batch Operations)

**–©–æ —î –∑–∞—Ä–∞–∑:**
- –¢—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è –∑–∞ —Ä–∞–∑
- POST /api/stock/receipt (–æ–¥–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è)

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
```python
POST /api/stock/receipt/bulk
{
  "idempotency_key": "batch-001",
  "operations": [
    {"nomenclature_id": 1, "quantity": 100},
    {"nomenclature_id": 2, "quantity": 50},
    {"nomenclature_id": 3, "quantity": 75}
  ],
  "metadata": {"source": "delivery", "document_id": "DOC-123"}
}
```

**–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ:**
- –í–∞—Ä—ñ–∞–Ω—Ç A: –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ –≤—Å—é –æ–ø–µ—Ä–∞—Ü—ñ—é (All or Nothing) ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ
- –í–∞—Ä—ñ–∞–Ω—Ç B: –ü—Ä–æ–≤–µ—Å—Ç–∏ —á–∞—Å—Ç–∫–æ–≤–æ (Partial Success)

### 3. ‚ö†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π

**–©–æ —î:**
```python
metadata = {"notes": "–ü—Ä–∏—Ö–æ–¥ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞"}
```

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
```python
# –î–æ–¥–∞—Ç–∏ –ø–æ–ª—è –¥–æ stock_movements:
- source_operation_type: "production" | "purchase" | "inventory" | "packaging"
- source_operation_id: 12345
- parent_movement_id: NULL –∞–±–æ ID –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó

# –ü—Ä–∏–∫–ª–∞–¥ —Ü–µ–ø–æ—á–∫–∏:
–ó–∞–∫—É–ø—ñ–≤–ª—è (source_operation_type=purchase, id=10)
  ‚îî‚îÄ> –ü—Ä–∏—Ö—ñ–¥ –Ω–∞ —Å–∫–ª–∞–¥ (parent_movement_id=NULL, source_operation_id=10)
       ‚îî‚îÄ> –í–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ (source_operation_type=production, id=20)
            ‚îî‚îÄ> –†–æ–∑—Ö—ñ–¥ —Å–∏—Ä–æ–≤–∏–Ω–∏ (parent_movement_id=10, source_operation_id=20)
            ‚îî‚îÄ> –ü—Ä–∏—Ö—ñ–¥ –ø—Ä–æ–¥—É–∫—Ü—ñ—ó (parent_movement_id=NULL, source_operation_id=20)
```

### 4. ‚ùå –ï–∫—Å–ø–æ—Ä—Ç –∂—É—Ä–Ω–∞–ª—ñ–≤

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
```python
GET /api/stock/movements/export?format=excel&start_date=...
GET /api/stock/movements/export?format=pdf&start_date=...
GET /api/stock/movements/export?format=csv&start_date=...
```

**–§–æ—Ä–º–∞—Ç–∏:**
- Excel (.xlsx) - –∑ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º, —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
- PDF - –¥–ª—è –¥—Ä—É–∫—É
- CSV - –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É –≤ —ñ–Ω—à—ñ —Å–∏—Å—Ç–µ–º–∏

### 5. ‚ö†Ô∏è –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ñ–π –¥–æ—Å—Ç–∞–≤—Ü—ñ –∑ —ñ–Ω—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–©–æ —î:**
```python
if cursor.fetchone():
    return {"status": "already_processed"}
```

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
```python
if existing_operation:
    # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è
    if existing_operation.quantity != operation.quantity:
        raise HTTPException(
            status_code=409,
            detail="Idempotency conflict: same key with different parameters"
        )
    return {"status": "already_processed", "data": existing_operation}
```

### 6. ‚ùå –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∞—Ö

**–ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏:**
- –î–æ–∫—É–º–µ–Ω—Ç `MOVEMENTS_BEHAVIOR.md`
- –û–ø–∏—Å–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö
- –û–ø–∏—Å–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –ø—Ä–∏ batch –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö
- –û–ø–∏—Å–∞—Ç–∏ –ø–æ–ª—ñ—Ç–∏–∫—É —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ

---

## üìä –ó–ê–ì–ê–õ–¨–ù–ê –û–¶–Ü–ù–ö–ê –í–Ü–î–ü–û–í–Ü–î–ù–û–°–¢–Ü –¢–ó

| –†–æ–∑–¥—ñ–ª –¢–ó | –°—Ç–∞—Ç—É—Å | –û—Ü—ñ–Ω–∫–∞ |
|-----------|--------|--------|
| 1. –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏ | ‚úÖ | 100% |
| 2. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å (–ø—Ä–∏—Ö—ñ–¥/—Ä–æ–∑—Ö—ñ–¥) | ‚úÖ | 100% |
| 3. –Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏ (–∑–∞–±–æ—Ä–æ–Ω–∞ –≤—ñ–¥'—î–º–Ω–∏—Ö, –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è, —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å) | ‚úÖ | 95% |
| 3. –Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏ (–∑–≤'—è–∑–Ω—ñ—Å—Ç—å) | ‚ö†Ô∏è | 60% |
| 4. –ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ (–≥–æ–Ω–∫–∏, batch) | üî¥ | 20% |
| 5. –ñ—É—Ä–Ω–∞–ª (–∑–∞–ø–∏—Å) | ‚úÖ | 100% |
| 5. –ñ—É—Ä–Ω–∞–ª (–µ–∫—Å–ø–æ—Ä—Ç) | ‚ùå | 0% |
| 6. Offline | ‚úÖ | 100% |
| 7. –ü—Ä–∏–π–º–∞–ª—å–Ω—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó (–±–∞–∑–æ–≤—ñ) | ‚úÖ | 90% |
| 7. –ü—Ä–∏–π–º–∞–ª—å–Ω—ñ –∫—Ä–∏—Ç–µ—Ä—ñ—ó (batch, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è) | ‚ùå | 30% |

**–ó–∞–≥–∞–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å: 75%**

---

## üéØ –ü–õ–ê–ù –î–û–†–û–ë–ö–ò –î–û 100%

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (–û–ë–û–í'–Ø–ó–ö–û–í–û)
1. **–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è** (3-4 –≥–æ–¥–∏–Ω–∏)
   - –î–æ–¥–∞—Ç–∏ SELECT FOR UPDATE –∞–±–æ optimistic locking
   - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
   - –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è race conditions

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–≤'—è–∑–Ω–æ—Å—Ç—ñ** (2-3 –≥–æ–¥–∏–Ω–∏)
   - –î–æ–¥–∞—Ç–∏ `source_operation_type`, `source_operation_id`, `parent_movement_id`
   - –ú—ñ–≥—Ä–∞—Ü—ñ—è –ë–î
   - –û–Ω–æ–≤–∏—Ç–∏ API

### –§–∞–∑–∞ 2: –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É (–ë–ê–ñ–ê–ù–û)
3. **Batch –æ–ø–µ—Ä–∞—Ü—ñ—ó** (4-5 –≥–æ–¥–∏–Ω)
   - POST /api/stock/receipt/bulk
   - POST /api/stock/withdrawal/bulk
   - All-or-nothing –ª–æ–≥—ñ–∫–∞
   - –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

4. **–ï–∫—Å–ø–æ—Ä—Ç –∂—É—Ä–Ω–∞–ª—ñ–≤** (3-4 –≥–æ–¥–∏–Ω–∏)
   - Excel –µ–∫—Å–ø–æ—Ä—Ç (openpyxl)
   - CSV –µ–∫—Å–ø–æ—Ä—Ç
   - PDF –µ–∫—Å–ø–æ—Ä—Ç (reportlab)

### –§–∞–∑–∞ 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (–û–ë–û–í'–Ø–ó–ö–û–í–û)
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏** (1-2 –≥–æ–¥–∏–Ω–∏)
   - `MOVEMENTS_BEHAVIOR.md` - –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∞—Ö
   - `API_MOVEMENTS.md` - –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API
   - Swagger/OpenAPI —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á

### 1. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1 - –ù–ï–ì–ê–ô–ù–û
**–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è** - —Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–ø–µ–∫–∏ –¥–∞–Ω–∏—Ö!

–ë–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω—å –º–æ–∂–ª–∏–≤—ñ:
- –í—ñ–¥'—î–º–Ω—ñ –∑–∞–ª–∏—à–∫–∏ –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö
- –í—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö
- –ù–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –∑–∞–ª–∏—à–∫—ñ–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ

### 2. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2 - –í–ê–ñ–õ–ò–í–û
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–≤'—è–∑–Ω–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π** - –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞ –¥–ª—è –∞—É–¥–∏—Ç—É —Ç–∞ —Ç—Ä–∞—Å—É–≤–∞–Ω–Ω—è

### 3. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3 - –ë–ê–ñ–ê–ù–û
**Batch –æ–ø–µ—Ä–∞—Ü—ñ—ó** - –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ UX
**–ï–∫—Å–ø–æ—Ä—Ç** - –∑—Ä—É—á–Ω—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

---

## ‚úÖ –í–ò–°–ù–û–í–û–ö

**–ë–∞–∑–æ–≤–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –º–æ–¥—É–ª—è "–î–≤–∏–∂–µ–Ω–∏—è –∑–∞–ø–∞—Å–æ–≤" —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–∞ 75%.**

**–ü—Ä–∞—Ü—é—î:**
- ‚úÖ –ü—Ä–∏—Ö—ñ–¥/–†–æ–∑—Ö—ñ–¥
- ‚úÖ –ó–∞–±–æ—Ä–æ–Ω–∞ –≤—ñ–¥'—î–º–Ω–∏—Ö –∑–∞–ª–∏—à–∫—ñ–≤
- ‚úÖ –Ü–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å
- ‚úÖ Offline –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- ‚úÖ –ñ—É—Ä–Ω–∞–ª —Ä—É—Ö—É

**–ö—Ä–∏—Ç–∏—á–Ω—ñ –Ω–µ–¥–æ–ª—ñ–∫–∏:**
- üî¥ –ù–µ–º–∞—î –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ race conditions
- ‚ö†Ô∏è –ù–µ–º–∞—î batch –æ–ø–µ—Ä–∞—Ü—ñ–π
- ‚ö†Ô∏è –ù–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å
- ‚ùå –ù–µ–º–∞—î –µ–∫—Å–ø–æ—Ä—Ç—É –∂—É—Ä–Ω–∞–ª—ñ–≤

**–î–ª—è production –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –û–ë–û–í'–Ø–ó–ö–û–í–û –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
1. –î–æ–¥–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
2. –°—Ç—Ä—É–∫—Ç—É—Ä—É–≤–∞—Ç–∏ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π
3. –ù–∞–ø–∏—Å–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –ø–æ–≤–µ–¥—ñ–Ω–∫–∏

**–ß–∏ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –¥–æ—Ä–æ–±–∫—É –º–æ–¥—É–ª—è?**
