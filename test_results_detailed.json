{
  "total": 17,
  "passed": 15,
  "failed": 2,
  "success_rate": 88.23529411764706,
  "results": [
    {
      "test": "Health Check",
      "success": true,
      "details": "Status: ok",
      "timestamp": "2025-11-12T13:29:44.065409",
      "response_data": {
        "status": "ok",
        "service": "warehouse-api"
      }
    },
    {
      "test": "GET /production/recipes",
      "success": true,
      "details": "Found 8 recipes with all required fields",
      "timestamp": "2025-11-12T13:29:45.253237",
      "response_data": {
        "count": 8,
        "sample": {
          "id": 3,
          "name": "\u0411\u0430\u0441\u0442\u0443\u0440\u043c\u0430 \u0437 \u043a\u043e\u043d\u0438\u043d\u0438 \u0432\u0430\u0433\u043e\u0432\u0430",
          "target_product_id": 108,
          "target_product_name": "\u0411\u0430\u0441\u0442\u0443\u0440\u043c\u0430 \u0437 \u043a\u043e\u043d\u0438\u043d\u0438 \u0432\u0430\u0433\u043e\u0432\u0430",
          "expected_yield_min": 67.0,
          "expected_yield_max": 68.0,
          "description": "\u0420\u0435\u0446\u0435\u043f\u0442 \u0434\u043b\u044f \u0411\u0430\u0441\u0442\u0443\u0440\u043c\u0430 \u0437 \u043a\u043e\u043d\u0438\u043d\u0438 \u0432\u0430\u0433\u043e\u0432\u0430",
          "steps": []
        }
      }
    },
    {
      "test": "GET /production/recipes/2",
      "success": true,
      "details": "Recipe '\u0411\u0430\u0441\u0442\u0443\u0440\u043c\u0430 \u043a\u043b\u0430\u0441\u0438\u0447\u043d\u0430' with 8 steps, ordered: True",
      "timestamp": "2025-11-12T13:29:46.583945",
      "response_data": {
        "recipe_name": "\u0411\u0430\u0441\u0442\u0443\u0440\u043c\u0430 \u043a\u043b\u0430\u0441\u0438\u0447\u043d\u0430",
        "steps_count": 8
      }
    },
    {
      "test": "POST /production/batches",
      "success": true,
      "details": "Created batch BAST-12112025-9 with ID 20",
      "timestamp": "2025-11-12T13:29:49.425811",
      "response_data": {
        "batch_id": 20,
        "batch_number": "BAST-12112025-9"
      }
    },
    {
      "test": "GET /production/batches",
      "success": true,
      "details": "Retrieved 11 batches",
      "timestamp": "2025-11-12T13:29:50.608033",
      "response_data": {
        "count": 11
      }
    },
    {
      "test": "GET /production/batches?status=created",
      "success": true,
      "details": "Retrieved 4 created batches",
      "timestamp": "2025-11-12T13:29:51.830776",
      "response_data": {
        "count": 4
      }
    },
    {
      "test": "GET /production/batches/20",
      "success": true,
      "details": "Retrieved batch BAST-12112025-9",
      "timestamp": "2025-11-12T13:29:53.012846",
      "response_data": {
        "batch_number": "BAST-12112025-9",
        "status": "created"
      }
    },
    {
      "test": "PUT /production/batches/20/complete",
      "success": true,
      "details": "Batch completed with 75.0% yield",
      "timestamp": "2025-11-12T13:29:54.831151",
      "response_data": {
        "yield_percent": 75.0,
        "batch_id": 20
      }
    },
    {
      "test": "Spice Deduction - Create Batch",
      "success": true,
      "details": "Created test batch BAST-12112025-10 (ID: 21)",
      "timestamp": "2025-11-12T13:29:57.621953",
      "response_data": null
    },
    {
      "test": "Spice Deduction - Recipe Spices Check",
      "success": true,
      "details": "All 5 expected spices found with correct quantities",
      "timestamp": "2025-11-12T13:29:59.000186",
      "response_data": null
    },
    {
      "test": "Spice Deduction - Initial Balances",
      "success": true,
      "details": "Retrieved initial balances for 5 spices",
      "timestamp": "2025-11-12T13:30:04.937792",
      "response_data": null
    },
    {
      "test": "Spice Deduction - Mix Production",
      "success": true,
      "details": "Mix production successful: Mix produced successfully",
      "timestamp": "2025-11-12T13:30:09.204951",
      "response_data": null
    },
    {
      "test": "Spice Deduction - Balance Verification",
      "success": true,
      "details": "\u2705 \u0411\u043e\u0440\u043e\u0448\u043d\u043e: 76.92 \u2192 73.84 (deducted 3.08); \u2705 \u041f\u0430\u0436\u0438\u0442\u043d\u0438\u043a: 59.77 \u2192 50.54 (deducted 9.23); \u2705 \u041f\u0430\u043f\u0440\u0438\u043a\u0430: 133.38 \u2192 128.76 (deducted 4.62); \u2705 \u041f\u0435\u0440\u0435\u0446\u044c \u0447\u0456\u043b\u0456: 78.46 \u2192 76.92 (deducted 1.54); \u2705 \u0427\u0430\u0441\u043d\u0438\u043a: 120.85 \u2192 114.7 (deducted 6.15)",
      "timestamp": "2025-11-12T13:30:10.388961",
      "response_data": null
    },
    {
      "test": "Spice Deduction - Stock Movements",
      "success": false,
      "details": "Expected at least 5 spice movements, found 0",
      "timestamp": "2025-11-12T13:30:11.576502",
      "response_data": null
    },
    {
      "test": "Spice Deduction Edge Cases",
      "success": false,
      "details": "\u274c Failed to create test batch for insufficient stock test: 400; \u2705 Idempotency working - duplicate mix call detected; \u2705 Zero initial weight handled gracefully",
      "timestamp": "2025-11-12T13:30:28.539739",
      "response_data": null
    },
    {
      "test": "Edge Cases",
      "success": true,
      "details": "\u2705 Invalid recipe ID returns 404; \u2705 Non-existent recipe returns 404; \u2705 Non-existent batch returns 404; \u2705 Completing already completed batch returns 400",
      "timestamp": "2025-11-12T13:30:33.328321",
      "response_data": null
    },
    {
      "test": "Database Verification",
      "success": true,
      "details": "Found 2 finished products with stock",
      "timestamp": "2025-11-12T13:30:34.509439",
      "response_data": {
        "finished_products_count": 2
      }
    }
  ]
}